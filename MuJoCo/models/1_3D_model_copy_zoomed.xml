<!-- =========================================================================== #
# Project:        [M3X] Whip Project
# Title:          XML Model File for 3D Upper Limb
# Author:         Moses C. Nah
# Creation Date:  Monday, July 1st, 2020

# Description: 	  This model file is simply for analyzing the forward kinematics of the upper-limb model.
#									This 3D_UpperLimb model has 3DOF on the shoulder joint and 1DOF on the elbow joint.
# =========================================================================== -->


<mujoco model="3D_UpperLimb">

  <compiler inertiafromgeom = "auto"
            angle 					= "radian" />

						<option  timestep  = '0.0001'
										iterations = '50'
										integrator = 'Euler'
										   gravity = "0 0 -9.81"
									   collision = 'all' >

							<flag energy = 'enable'/>

						</option>


  <asset>
    <!-- Texture of the surrounding sky box
         setting everything as white-ish color for better visualization -->
     <!-- <texture type 		= "skybox"
              builtin = "flat"
              rgb1 		= "1 1 1"
              rgb2		= "1 1 1"
              width 	= "100"
              height 	= "100"/> -->
			<texture type="skybox" builtin="checker" rgb1="1 1 1" rgb2="1 1 1" width="200" height="200"  />
			<!-- Joint and Limb Color -->
 		 <material name="JointColor" 		 rgba="0.1 0.1 0.1 1" />
 		 <material name="LimbColor" 		 rgba="0.1 0.1 0.1 1" />
 		 <material name="pointMassColor" rgba="0.75 0.0 0.75 1" />
 		 <material name="RefMassColor" 	 rgba="0.2 0.9 0.1 1.0" />

   </asset>

 	<visual>
 		<global glow="1.0" fovy="45" ipd="0.0"/>
 		<headlight specular="0.0 0.0 0.0" diffuse="1.0 1.0 1.0"/>
 	</visual>

  <worldbody>

    <body name='cameramover' mocap='true' pos='0 0 0'>
				<camera name='mycamera' pos='0.0 2.0 2.0' euler='1.5707 0 0'/>
  	</body>

    <!-- ============ UPPER ARM START =============== -->
		<body name='upperArm' pos='0 0 0' euler='0 0 0'>
			<inertial pos='0 0 -0.03225'     mass='1.595'         diaginertia='0.011917 0.011937 0.001325'/>
			<!-- <geom name='shoulderGEOM' type='sphere' pos='0 0 0' material='JointColor' size='0.0294' mass='0'/> -->
			<geom name="shoulderGEOM" type="sphere" pos="0 0 0" material="JointColor" size="0.005375" mass="0" />
			<joint name="shoulderFlexExt" ref="0" type="hinge" stiffness="0" pos="0 0 0" axis = "0 -1 0" />
			<joint name='shoulderAddAbd' ref='0'  type='hinge' stiffness='0' pos='0 0 0' axis='-1 0 0' />
			<joint name='shoulderMedLat' ref='0'  type='hinge' stiffness='0' pos='0 0 0' axis=' 0 0 1' />
			<geom type="cylinder" fromto="0 0 0 0 0 -0.03675" material="LimbColor" mass="0" size="0.0018375" />
			<body name="foreArm" pos="0 0 -0.03675" euler="0 0 0">
				<inertial pos="0 0 -0.014" mass="0.869" diaginertia="0.004765 0.004855 0.000472" />
				 <geom name="elbowGEOM" type="sphere" pos="0 0 0" material="JointColor" size="0.005375" mass="0" />
				 <joint name="elbow" ref="0" type="hinge" stiffness="0" pos="0 0 0" axis="0 -1 0" />
				 <geom type="cylinder" fromto="0 0 0 0 0 -0.036375" material="LimbColor" mass="0" size="0.0018375" />
				 <geom name="geom_EE" type="sphere" pos="0 0 -0.036375" material="JointColor" size="0.005375" mass="0" />

			</body>
			<!-- ============ FORE ARM END   =============== -->

	</body>
  </worldbody>

	<actuator>

		<motor joint = 'shoulderFlexExt' name = 'shoulderFlexExtTorqueMotor' forcelimited = 'false'/>
		<motor joint = 'shoulderAddAbd'  name = 'shoulderAddAbdTorqueMotor'  forcelimited = 'false'/>
		<motor joint = 'shoulderMedLat'  name = 'shoulderMedLatTorqueMotor'  forcelimited = 'false'/>
    <motor joint = 'elbow'           name = 'elbowTorqueMotor'           forcelimited = 'false'/>

  </actuator>

</mujoco>
